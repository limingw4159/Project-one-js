<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            margin: 0;
            padding: 0;
        }
        .search{
            margin-top: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        table{
           
            margin:0 auto;
            border:1px solid black;
            text-align: center;
            font-size: 20px;
        }
        tr,td,th{
           border:1px solid black;
        }
    </style>
</head>
<body>
    <div class="search">
        按照价格查询:<input type="text" class="start">-</input><input type="text" class="end"></input>
        <button class="search-price">search</button>follow the goods name:<input type="text" class="product"></input>
        <button class="search-pro">search</button>
    </div>
    <table>
        <thead>
            <tr>
                <th>id</th>
                <th>product name</th>
                <th>price</th>
            </tr>
        </thead>
        <tbody>
            <!-- <tr>
                <td>1</td>
                <td>xiaomi</td>
                <td>3999</td>
            </tr>
            <tr>
                <td>2</td>
                <td>oppo</td>
                <td>999</td>
            </tr>
            <tr>
                <td>3</td>
                <td>honor</td>
                <td>1299</td>
            </tr>
                 <tr>
                <td>4</td>
                <td>huawei</td>
                <td>1999</td>
            </tr> -->
            
        </tbody>
    </table>
    <script>
        //用新增数组方法操作数据
        var data=[{
            id:1,
            pname:'xiaomi',
            price:3999
        },{
            id:2,
            pname:'oppo',
            price:999
        },{ 
            id:3,
            pname:'honor',
            price:1299
        },{
            id:4,
            pname:'huawei',
            price:1999
        },
    ];

        //1.获取相应的元素
        var tbody=document.querySelector('tbody');
        var search_price=document.querySelector('.search-price');
        var start=document.querySelector('.start');
        var end = document.querySelector('.end');
        var product=document.querySelector('.product');
        var search_product= document.querySelector('.search-pro');
  
      
        //把数据渲染到页面中
        function setDate(mydata) {
            //先清空原来tbody里面的数据:
            tbody.innerHTML='';
              mydata.forEach(function(value){
            //创建元素tr
            var tr=document.createElement('tr');
            //tr的内部元素是如下:
            tr.innerHTML='<td>'+value.id+'</td><td>'+value.pname+'</td><td>'+value.price+'</td>';
        //tbody添加tr
            tbody.appendChild(tr);
        });
        }
              //启动页面时加载数据
          setDate(data);
        //2.把数据渲染到页面中,value就是数组中的每一个对象
      
        //3根据价格查询商品
        search_price.addEventListener('click',function(){
            // alert(11);
           var newDate= data.filter(function(value) {
                return value.price>=start.value && value.price<=end.value;
                
            })
             console.log(newDate);
             setDate(newDate);
        })
       //把筛选完的对象渲染到页面中

        //4.根据商品名查找商品
        //如果查询数组中唯一的元素.用some方法更合适,因为他找到这个元素就不再循环
        search_product.addEventListener('click',function(){
            var arr=[];
            data.some(function (value) {

                if (value.pname===product.value) {
                    // console.log(value);
                    //把value添加到arr数组当中　
                    arr.push(value);
                    //只要找到了就return, 不再进行接下来的查找,some 主要用于大量数据,效率更高
                    return true;
                }
            })
               //把拿到的数据渲染到页面中
        setDate(arr);
        })
     

    </script>
</body>
</html>